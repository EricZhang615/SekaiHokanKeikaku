# SARM: Service function chain active reconfiguration mechanism based on load and demand prediction

> SARM: 基于负载和需求预测的服务功能链主动重配置机制

SARM预测节点的计算负载和SFC的资源需求，并利用这些预测来估计未来的QoS和制定SFC重构策略。该算法考虑多种因素，采用启发式算法在迁移成本和QoS保持之间进行权衡。实验表明，SARM可以有效地预测sfc节点的负载和资源需求。此外，SARM可以成功识别sfc进行重新配置，降低QoS维护成本。

文章认为，重调整重点在于决定哪些VNF需要进行重调整，重调整的目的地可以通过简单的计算调整开销得到。

**算法的优化目标：** 缓解节点负载，降低SFC端到端延迟，减小重调整开销

**文章提出的问题：** SFC的流量是实时变化的，造成物理节点的负载情况也是实时变化的，而物理节点的负载情况会直接影响到SFC流量的处理时延和排队时延，当负载高过阈值时，会造成SFC端到端时延的上升；但是SFC未来的流量大小和节点的负载情况是未知的，因此需要提出一种算法通过预测SFC未来的流量大小和物理节点未来的负载大小，从而指导VNF进行重调整以避免对SFC端到端时延造成影响，同时减小重调整的开销。

**文章关注的重点：** 物理节点负载情况的预测，SFC流量的预测，重调整开销的计算。

## 物理节点负载预测：LSTM + DQN 长短期结合预测

文章认为节点资源由长期稳定的趋势和短期动态的波动组成，用LSTM预测长期趋势，DQN预测短期波动

### LSTM

就是一个经典的LSTM模型，没啥特别的，输出下一时间段的长期趋势$L_n$

### DQN

用一个滑动窗口取历史数据作为观测空间，输出的动作为下一个时间段的短期波动值$I_n$

奖励函数设置为和预测值和实际值的差相关：

最后预测的结果为$X_n = L_n + I_n$

## SFC流量负载预测：HMM 隐马尔可夫模型

SFC流量的变化可以看作是一个隐马尔可夫过程，通过Baum–Welch算法训练模型参数，然后用前向算法计算未来的统计信息。

文章把SFC流量的情况简单划分为4种，简化训练难度。

文章要求针对每一种类型的SFC分别训练一种HMM，算法运行时先识别是哪一种SFC，然后使用对应的HMM预测SFC负载。

## SFC 重调整的决策和执行

1. 先使用上述两个算法预测t+1时刻的物理节点负载情况和SFC流量负载
2. 找时延超出阈值的SFC（S-List），然后将S-List中VNF按照所在物理节点负载大小降序排列，作为V-List
3. 对V-List每个待配置vnf（优先处理时延最高的VNF），遍历所有物理节点，找到负载不超出阈值、迁移后SFC时延不超出阈值的节点，加入候选节点
4. 对每个候选节点计算迁移开销，选择开销最小的
5. 计算这条SFC现在的端到端延迟是否超出阈值；若超出则继续，若没有则不再调整这条SFC

## 评估

见原文

## 问题

1. 文章的数据公开做的不好。训练LSTM和DQN的数据集不清楚，SFC流量信息的数据也不清楚，如果是模拟数据，没有说明参数设置
2. 评估是一个one step prediction，对于离散时间步的场景，每一次重调整都会对下一次的网络物理节点负载情况造成影响，这个文章也没考虑。
3. 可以尝试优化物理节点负载预测的方法，增加引入的数据维度，解决问题2；文章的SFC流量预测模型感觉太简单了